# Find One and Delete

Add `findOneAndDelete`to `db/dbFunctions.js`

__db/dbFunctions.js__
```js
/**
 * 
 * @param {string} collection the name of a collection
 * @param {string} id a valid _id as string
 */
export const findOneAndDelete = async (collection, id) => {
  try {
    const { db } = await connectDB()
    const ret = await db.collection(collection).findOneAndDelete({ _id: ObjectID(id) })
    
    return formatReturnSuccess(ret.value)
  }
  catch (e) {
    return formatReturnError('findOneAndDelete', e)
  }
}
```

Add `findOneAndDelete`to exports in `db/index.js`

__db/index.js__
```js
export {
  ...
  findById,
  findOneAndDelete, // Added
  insertMany,
  ...
} from './dbFunctions'

```

Add `findOneAndDelete`to imports in `dbFunctions.test.js`

__db/dbFunctions.test.js__
```js
import { 
  ...
  findById,
  findOneAndDelete, // Added
  insertMany,
  ...
} from 'db'
```

## Return Value
```js
{ lastErrorObject: { n: 1 },
  value:
   { _id: 5ce2d07f1b34ed62e556ed2f,
     title: 'second todo',
     completed: false },
  ok: 1 }

```

## Testing `findOneAndDelete`
__db/dbFunctions.test.js__
```js
describe('test findOneAndDelete', function() {
  let idToDelete = undefined
  before(async function() {
    await dropCollection(collectionName)
    const inserted = await insertMany(collectionName, fourTodos)
    idToDelete = inserted.data[1]._id.toString()
  })
  it('findOneAndDelete: should delete 1 of 4 todos', async function() {
    const deleted = await findOneAndDelete(collectionName, idToDelete)
    const idDeleted = deleted.data._id.toString()
    expect(idDeleted).to.equal(idToDelete)
  })
})
```
