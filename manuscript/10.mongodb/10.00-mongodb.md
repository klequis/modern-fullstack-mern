
# MondgoDB #

> TODO: Some information about Monogo and references to learn the basics
> TODO: What we will be doing
> 1. Setting-up ad MongoDB database and collection
> 2. Wrapping calls to Mongo


## About MongoDB queries
If you are unfamiliar with MongoDB queries, a quick overview can be found at [CRUD Operations](http://mongodb.github.io/node-mongodb-native/3.2/tutorials/crud/).

In this section we will be using `find` with a query & projection. Some good references for learning about these are:
- [Query Documents](https://docs.mongodb.com/manual/tutorial/query-documents/index.html)
- [CRUD Operations](http://mongodb.github.io/node-mongodb-native/3.2/tutorials/crud/)
- [Projections](http://mongodb.github.io/node-mongodb-native/3.2/tutorials/projections/)

**Chaining**

MongoDB functions are 'chainable'. For example (pseudo code):
```js
const a = find().project().toArray()
```
In this case
- the resutls of `find` are passed to `project`
- the results of `project` are passed to `toArray`
- the results of `toArray` go into the variable `a`.



> TODO: move this section to 'Formatting Return Values'
## Shaping Returned Data

OK, some mod to this.

The MongoDB native driver sometimes returns an array and other times an object. It seems to follow the pattern 
- If the function name contains 'one' such as `findOneAndDelete` then it returns an object.
- If the function contains more than one item it returns an array

I find this slightly confusing. The other option is to always return an array. This results in some functions returning an array of one, which seems like an inconvenience.

Neither option is ideal and relies on convention and documentation. I think the lesser of the two evils is to always return an array and thus all the return values will be of the shape:

```js
{
  data: [],
  error: string
}
```
Where:
- 'data' is always an array of documents even if it is only one document
- 'error' is the string returned by `e.message`

<div style="page-break-after: always;"></div>