# 05.01 DNS Setup on AWS Route53

# What is going on here

Now that you have a server with an IP address you can setup the DNS for it.
If you don't have a domain and would like to get a free one to use with this example, go to [freenom](https://www.freenom.com/en/index.html) to get one. I'll be using the domain 'klequis-todo.tk' which I got from freenom.

We will be using Amazon Route 53 as the DNS in the example. There are other ways to setup DNS but since the client will be running on the server and I use Route 53 for a number of other sites, I'll be doing it there in the example.

Summary
- Get ip info
- Create Hosted Zone
- Add sub domain
** Leave the rest for after there is a client to deploy

There is more to do for setting up the domain once we have a client deployed. However, for now, this setup will allow you to test the server once it is ready.

No go to the site where you registered your domain. For me that is freenom. Find your domain and its name server settings
Fill in the name servers
-
-






** **Keep this & incorporate later**
#### Create Hosted Zone

Creating a new Hosted Zone automatically creates NS and SOA records. You need to create record sets for both client and server as listed below.


| App | Record Type | domain | Value |
| --- | ----------- | ------- | ---- |
| Client | A | klequis-todo.tk | CloudFront endpoint |
| | AAAA | klequis-todo.tk | CloudFront endpoint |
| | A | www.klequis-todo.tk |CloudFront endpoint |
| | AAAA | www.klequis-todo.tk |CloudFront endpoint |
| Server | A | api.klequis-todo.tk | todo-server IPv4 address |
| | AAAA | api.klequis-todo.tk | todo-server IPv6 address |

> TODO: QUESTION: Setting-up www.api.klequis-todo.tk seems unnecessary since it will only be called from the client which will never use www.


> TODO: Chicken & egg: Should the hosted zone be created with the non-CloudFront addresses and then later modified, or should the setup be done after CloudFront is setup. I guess that depens on if a CF distribution can be cretaed before the Hosted Zone is setup.

### Create a record set for the apex domain
When creating a record set for the apex domain, in our case klequis-todo.tk, you leave the 'Name' edit box empty.

1. Click Create Record Set
    - Name: blank
    - Type: A - IPv4Address
2. Click 'Alias'
    - Alias Target: klequis-todo.tk (s3-website-us-west-2)
3. Other settings are left as the default
    - Routing policy: Simple (default)
    - Evaluate Target Health: No (default)
4. Click Create
5. Repeat steps 1 - 4 but choose 'AAAA - IPv6Address' for 'Type'

### Create a record set for a sub domain
When creating a record set for a subdomain you put the subdomain part of the address in the 'Name' edit box. The rest of the address is added for you.

1. Click Create Record Set
    - Name: www
    - Type: A - IPv4Address
2. Click 'Alias'
    - Alias Target: ?



#### 6. Repeat steps 10.1 - 10.4 above for www.klequis-todo.tk

![select endpoint](https://s3-us-west-2.amazonaws.com/react-typescript-todo-ex-images/select-endpoint.png)

#### 7. Set Name Servers
klequis-todo.tk is registered on freenom.com. Each registrar has a way for entering name servers. Here is how it looks on freenom
![name servers entered on freenom](https://s3-us-west-2.amazonaws.com/react-typescript-todo-ex-images/set-name-servers.png)

> It can take some time, officially up to 48 hours, for the name server records to get distributed across the internet.


Since AWS Route 53 is managing the DNS for the apex domain (klequis-todo.tk) it also has to manage the sub-domain api.klequis-todo.tk

- Go to [Route 53](https://console.aws.amazon.com/route53)
- Click 'Hosted zones'
- klequis-todo.tk
- Create A record ... 138.197.192.163
- Create AAA record ... 138.197.192.163
