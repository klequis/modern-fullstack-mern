# Inserting Many Documents

Add `insertMany` to `db/dbFunctions.js`

```js
/**
 * 
 * @param {string} collection the name of a collection
 * @param {Array} data  an array of documents, without _id, to be inserted
 */
export const insertMany = async (collection, data) => {
  try {
    const { db } = await connectDB()
    const ret = await db.collection(collection).insertMany(data)
    return formatReturnSuccess(ret.ops)
  }
  catch (e) {
    console.warn('ERROR: dbFunctions.insertMany', e.message)
    return formatReturnError(e)
  }
}
```

Add `insertMany` to `db/index.js`

__db/index.js__

```js
export { 
  dropCollection,
  insertMany // added
  insertOne
} from './dbFunctions'
```

Import `insertMany` in `dbFunctions.test.js`

```js
import { 
  dropCollection,
  insertOne // added
} from 'db'
```

## Return Value

The return value of `insertMany` is much smaller than the return value of `insertOne`:
```js
{ result: { ok: 1, n: 4 },
  ops:
   [ { title: 'first todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc3 },
     { title: 'second todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc4 },
     { title: 'third todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc5 },
     { title: 'fourth todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc6 } ],
  insertedCount: 4,
  insertedIds:
   { '0': 5ce2abbbb647ec4022322bc3,
     '1': 5ce2abbbb647ec4022322bc4,
     '2': 5ce2abbbb647ec4022322bc5,
     '3': 5ce2abbbb647ec4022322bc6 } }

```


Again, the part that will be returned is:
```js
ops:
   [ { title: 'first todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc3 },
     { title: 'second todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc4 },
     { title: 'third todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc5 },
     { title: 'fourth todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc6 } ],
```

## Testing `insertMany`

__db/dbFunctions.test.js__
```js
/**
 * 
 * @param {string} collection the name of a collection
 * @param {Array} data  an array of documents, without _id, to be inserted
 */
export const insertMany = async (collection, data) => {
  try {
    const { db } = await connectDB()
    const ret = await db.collection(collection).insertMany(data)
    console.log('ret', ret)
    return formatReturnSuccess(ret.ops)
  }
  catch (e) {
    console.warn('ERROR: dbFunctions.insertMany', e.message)
    return formatReturnError(e)
  }
}
```