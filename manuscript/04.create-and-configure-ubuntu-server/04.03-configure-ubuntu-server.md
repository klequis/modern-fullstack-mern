# 04.03 Configure Ubuntu Server

## Log in as root

Since a SSH key was added to the machine you are able to login as root. From a terminal on your local machine, log in as the root user
```console
ssh root@your_server_ip
```

- You will see the message - type 'yes' and hit enter
> The authenticity of host '206.189.77.123 (206.189.77.123)' can't be established.
> ECDSA key fingerprint is SHA256:K2rtC0an9u6UPpEMwEcfUqGyjWT1ckCpCLKKjJAQ56o.
> Are you sure you want to continue connecting (yes/no)?

The command promp should now look like this:
```console
root@todo-server-1:~#
```

## Create a New User
You can call your user anything you want. I'm going to name mine 'doadmon'.
```console
adduser doadmin
```
You will be asked to enter a new password for the user.

Next you will be asked a number of questions. Fill-in these values as you see fit.

## Grant Administrative Privileges
Then grant this user administrative privileges
```console
usermod -aG sudo doadmin
```

## Set Up a Firewall
The utility UFW (Uncomplicated Firewall) is already installed on Ubuntu. For more information on UFW see the [UFW User Manual](http://manpages.ubuntu.com/manpages/bionic/en/man8/ufw.8.html)

If you check UFW's status you will see it is currently disabled
```console
root@todo-server-1:~# ufw status
Status: inactive
```
Some applications such as OpenSSH register themselves with UFW when installed. UFW can only manage applications that are registered with it.

To see which apps are currently registered
```console
root@todo-server-1:~# ufw app list
Available applications:
  OpenSSH
```
Enable/allow connection via SSH
```console
ufw allow OpenSSH
```
Then enable ufw
```console
ufw enable
```
You will see the message
```console
Command may disrupt existing ssh connections. Proceed with operation (y|n)?
```
Type y
'y' and hit enter. The response should be
```console
Firewall is active and enabled on system startup
```
Now check the status again

```console
root@todo-server-1:~# ufw status
Status: active
```

## Enable External SSH for Your New User
> TODO: what does this command do? Copy ~/.ssh from root to /home/doadmin?

```console
rsync --archive --chown=doadmin:doadmin ~/.ssh /home/doadmin
```

## Test you new user
Before logging out of the root account, test your new user by opening a new terminal window and logging in as the new user. Since this is the first time you are logging in you will be asked for the users password.

```js
ssh doadmin@<ipaddress>
```
From this point forward, you should do all your work on the server with this new user.
