# 03.01 Minimal Express Application

We will start with the minimum needed to have a working and deployable REST API.

## Install Packages

TODO: what should the directory name be?

```js
$ mkdir DIRNAME
$ npm init -y
$ npm i @babel/runtime body-parser cors express
$ npm i -D @babel/cli @babel/core @babel/node @babel/plugin-transform-runtime @babel/preset-env @babel/node
$ npm i -D @babel/types @types/node @types/body-parser @types/express @types/cors
```

TODO: question: why using babel-node?


> Types are not absolutely necessary, but are helpful when writing code and don't get included in the build so are effectively neutral.

 ## Create Server

 The entry point for the server will be server/index.js

```js
$ mkdir server
$ touch server/index.js
```


 > Configuration will be hard-coded for now.

 Add a [`.gitignore`](https://git-scm.com/docs/gitignore) file.

 ```console
 touch .gitignore
 ```

 Add the below contents to `.gitignore`.

 ```
 app.log.*
 config.settings.js
 coverage
 dist
 *.lcov
 lib-cov
 .lock-wscript
 logs
 log
 *.log
 node_modules/
 .node_repl_history
 .npm
 npm-debug.log*
 .nyc_output
 pids
 *.pid
 *.pid.lock
 report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json
 *.seed
 ```



 ```js
 // server/index.js

 import express from 'express'
 import bodyParser from 'body-parser'
 import cors from 'cors'

 const app = express()

 const port = 3030

 app.use(cors())
 app.use(bodyParser.json())


 app.get('/', (req, res) => {
     res.status(200).send({ data: 'hello', error: '' })
 })

 app.listen(port, () => {
     console.log(`Todo API is listening on port ${port}`)
 })
 ```

Add `babel.config.js`

```js
$ touch babel.config.js
```

```js
// babel.config.js

module.exports = function (api) {
  api.cache(true);

  const presets = [ "@babel/preset-env" ];
  const plugins = [ "@babel/plugin-transform-runtime" ];

  return {
    presets,
    plugins
  };
}
```

Add a "start" script to `package.json` and remove the "test" script for now.

```
"start": "NODE_ENV=development NODE_PATH=./ nodemon --exec babel-node server/index.js"
```



# First Run
At this point you can run the server from the command line
```js
$ npm start
```

Several lines of text will be printed to the terminal. The last line will be:
```js
Todo API is listening on port 3030
```

Open a browser and type into the address bar
```
localhost:3030
```

In the response you should see:
```js
{ data: "hello", error: ""}
```
