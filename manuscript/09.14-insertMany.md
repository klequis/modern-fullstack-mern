# `insertMany`

## Add `insertMany` to `db/dbFunctions.js`

```js
/**
 * 
 * @param {string} collection the name of a collection
 * @param {Array} data  an array of documents, without _id, to be inserted
 */
export const insertMany = async (collection, data) => {
  try {
    const { db } = await connectDB()
    const ret = await db.collection(collection).insertMany(data)
    return formatReturnSuccess(ret.ops)
  }
  catch (e) {
    console.warn('ERROR: dbFunctions.insertMany', e.message)
    return formatReturnError(e)
  }
}
```

## Export `insertMany` in `db/index.js`

__db/index.js__

```js
export { 
  close
  insertMany // added
} from './dbFunctions'
```

```js
import { 
  insertMany // added
} from 'db'
```

__db/dbFunctions.test.js__
```js
describe('test insertMany', function() {
  it('insertMany: should insert 4 todos', async function() {
    const i = await insertMany(collectionName, fourTodos)
    expect(i.data.length).to.equal(4)
  })
})
```

## Return Value

The return value of `insertMany` is much smaller than the return value of `insertOne`:
```js
{ result: { ok: 1, n: 4 },
  ops:
   [ { title: 'first todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc3 },
     { title: 'second todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc4 },
     { title: 'third todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc5 },
     { title: 'fourth todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc6 } ],
  insertedCount: 4,
  insertedIds:
   { '0': 5ce2abbbb647ec4022322bc3,
     '1': 5ce2abbbb647ec4022322bc4,
     '2': 5ce2abbbb647ec4022322bc5,
     '3': 5ce2abbbb647ec4022322bc6 } }

```


Again, the part that will be returned is:
```js
ops:
   [ { title: 'first todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc3 },
     { title: 'second todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc4 },
     { title: 'third todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc5 },
     { title: 'fourth todo',
       completed: false,
       _id: 5ce2abbbb647ec4022322bc6 } ],
```

## Add `insertMany` to imports in `dbFunctions.test.js`



## Testing `insertMany`

__db/dbFunctions.test.js__
```js
describe('test insertMany', function() {
  before(async function() {
    await dropCollection(collectionName)
  })
  it('insertMany: should insert 4 todos', async function() {
    const i = await insertMany(collectionName, fourTodos)
    expect(i.data.length).to.equal(4)
  })
})
```