# Daploy Minimal Express Application

NOTE: Clone the above project (using https for now as ssh key isn't on server).

# Build, Deploy & Test

TODO: Before proceeding need to add a 'build' npm script to the express server.

Add build npm script

Add this line to the "scripts" section of package.json before the "start" script.

```js
"build": "babel . -d dist --ignore node_modules --source-maps"
```

- **bable .**: compiles files from ES 6/7 files to ES5.
- **-d**: specifies the directory to build in.
- **--ignore**: will exclude files & directories from the build. In this case we are ignoring /node_modules.
- **--source-maps**: indicates we want source maps included in the build.

> For more information on source maps see: [Use a source map](https://developer.mozilla.org/en-US/docs/Tools/Debugger/How_to/Use_a_source_map).

## Build Process

- Push to git
- Log into the production server on DigitalOcean

```
git clone https://github.com/klequis/express-server-part-1.git
cd express-server-part-1
npm i
npm run build
```

Move /dist files to ~/app

```
mv dist ../app
```

Copy in `package.json` and `package-lock.json`

```
cp package.json ../app/package.json
cp package-lock.json ../app/package-lock.json
```

Change directory to ~/app and install npm packages.

```console
cd ../app
npm i
```

Run the server.

```console
node server
```


Add modules

```
npm i
```
